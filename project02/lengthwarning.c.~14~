/* The purpose of this program is to check whether or not 
   any lines in its input have length greater than 80 characters. 
   This program takes in a file containing no more than 99999 
   lines that each have no more than 999 characters. 
   This program utilizes an array to store individual
   characters in lines and, after each line is read, 
   prints out the characters in the line. If the line contains
   more than 80 characters, a secondary line is printed with 
   carets under every character after the 80th character.
   This program will be useful to test style for 
   future projects, and contains only one main 
   function.
 */

#include <stdio.h> 

/* Main function--only function in this program*/
int main(void) {

  /* Declaring (and instantiating some) variables */
  char ch;
  char arr[1000];
  int length = 0;
  int size = 0;
  int number = 0;
  int i; 
  int j; 
  int k;

  /* Scanning first part of line before loop */
  scanf("%c", &ch);

  /* Looping until end of input*/
  while (!feof(stdin)) {

    /* Line number */
    number++;

    /* Inner loop until end of line is reached */
    while (ch != '\n') {

      /* Special case for tab characters */
      if (ch == '\t') {
	/* Modifying length with tab character length */
	length = length + (8 - (length % 8));

      /* If character is not a tab, length incremented normally */
      } else {
	length++;
      }

      /* Assigning line character to array */
      arr[size] = ch;
      size++;
      scanf("%c", &ch);
    }
    
    arr[size] = '\n';
    
    if (length <= 80) {
	printf(" "); 
      } else {
	printf("*");  
      }
      printf("%5d", number); 
      printf(": ");

      for (i = 0; i < size; i++) {
	printf("%c", arr[i]);
      }

    if (length > 80) {
      printf("\n");
      for (j = 1; j <= 88; j++) {
        printf(" "); 
      }
      for (k = 1; k <= length-80; k++) {
	printf("^");
      }
    }
    printf("\n");
    length = 0;
    size = 0;
    scanf("%c", &ch);
  } 
  return 0;
}
